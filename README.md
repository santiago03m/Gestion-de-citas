# üè• Sistema de Gesti√≥n de Citas M√©dicas

[![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.5.6-brightgreen.svg)](https://spring.io/projects/spring-boot)
[![React](https://img.shields.io/badge/React-19.1.1-blue.svg)](https://reactjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.9.3-blue.svg)](https://www.typescriptlang.org/)
[![Java](https://img.shields.io/badge/Java-21-orange.svg)](https://www.oracle.com/java/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

Sistema completo de gesti√≥n de citas m√©dicas con arquitectura de tres capas: Backend REST API con Spring Boot, Frontend con React + TypeScript, y base de datos PostgreSQL.

## üìã Tabla de Contenidos

- [Caracter√≠sticas](#-caracter√≠sticas)
- [Arquitectura](#-arquitectura)
- [Tecnolog√≠as](#-tecnolog√≠as)
- [Requisitos Previos](#-requisitos-previos)
- [Instalaci√≥n](#-instalaci√≥n)
- [Configuraci√≥n](#-configuraci√≥n)
- [Estructura del Proyecto](#-estructura-del-proyecto)
- [API Documentation](#-api-documentation)
- [Componentes Frontend](#-componentes-frontend)
- [Seguridad](#-seguridad)
- [Testing](#-testing)
- [Deployment](#-deployment)
- [Contribuci√≥n](#-contribuci√≥n)
- [Licencia](#-licencia)

---

## ‚ú® Caracter√≠sticas

### Backend
- ‚úÖ **Autenticaci√≥n JWT** - Sistema completo de login/registro con tokens
- ‚úÖ **Control de Acceso Basado en Roles (RBAC)** - ADMIN, DOCTOR, PACIENTE
- ‚úÖ **API REST** - Endpoints RESTful con Spring Boot
- ‚úÖ **Base de Datos Relacional** - PostgreSQL con JPA/Hibernate
- ‚úÖ **Mapeo de Objetos** - MapStruct para conversi√≥n DTO ‚Üî Entity
- ‚úÖ **Validaci√≥n** - Bean Validation (Jakarta Validation)
- ‚úÖ **Manejo de Excepciones** - GlobalExceptionHandler centralizado
- ‚úÖ **CORS** - Configurado para desarrollo local

### Frontend
- ‚úÖ **Dashboard Modular** - Arquitectura de componentes reutilizables
- ‚úÖ **Sistema de Pesta√±as Din√°micas** - Seg√∫n rol del usuario
- ‚úÖ **CRUD Completo** - Pacientes, Doctores, Usuarios y Citas
- ‚úÖ **Pre-selecci√≥n Inteligente** - Formularios contextuales por rol
- ‚úÖ **Modales Informativos** - Sin IDs t√©cnicos, con iconos y descripciones
- ‚úÖ **Gesti√≥n de Estado** - Context API para autenticaci√≥n
- ‚úÖ **Routing Protegido** - Rutas privadas con React Router
- ‚úÖ **UI Moderna** - Tailwind CSS v4 con animaciones

### Funcionalidades por Rol

#### üë®‚Äç‚öïÔ∏è ADMIN
- Gesti√≥n completa de pacientes, doctores y usuarios
- Creaci√≥n y modificaci√≥n de citas
- Edici√≥n de contrase√±as de usuarios
- Acceso total al sistema

#### ü©∫ DOCTOR
- Visualizaci√≥n de pacientes
- Gesti√≥n de sus propias citas
- Pre-selecci√≥n autom√°tica en formularios
- Acceso limitado a sus datos

#### ü§í PACIENTE
- Visualizaci√≥n de sus citas
- Creaci√≥n de nuevas citas
- Pre-selecci√≥n autom√°tica como paciente
- Acceso solo a informaci√≥n personal

---

## üèó Arquitectura

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      FRONTEND (React)                        ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ
‚îÇ  ‚îÇ   Pages      ‚îÇ  ‚îÇ  Components  ‚îÇ  ‚îÇ    Hooks     ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ  Dashboard   ‚îÇ  ‚îÇ   Modals     ‚îÇ  ‚îÇ  useAuth     ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ   Welcome    ‚îÇ  ‚îÇ   Tables     ‚îÇ  ‚îÇ  useData     ‚îÇ      ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
‚îÇ         ‚Üì                  ‚Üì                  ‚Üì             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ          Services (Axios + JWT Interceptors)         ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                ‚Üì HTTP/HTTPS
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   BACKEND (Spring Boot)                      ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ
‚îÇ  ‚îÇ Controllers  ‚îÇ‚Üí ‚îÇ   Services   ‚îÇ‚Üí ‚îÇ Repositories ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ  REST API    ‚îÇ  ‚îÇ   Business   ‚îÇ  ‚îÇ     JPA      ‚îÇ      ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
‚îÇ         ‚Üë                  ‚Üë                  ‚Üì             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                        ‚îÇ
‚îÇ  ‚îÇ   Security   ‚îÇ  ‚îÇ    Mappers   ‚îÇ                        ‚îÇ
‚îÇ  ‚îÇ  JWT Filter  ‚îÇ  ‚îÇ  MapStruct   ‚îÇ                        ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                ‚Üì JDBC
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   DATABASE (PostgreSQL)                      ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  Users   ‚îÇ  ‚îÇ Pacientes‚îÇ  ‚îÇ Doctores ‚îÇ  ‚îÇ  Citas   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  Roles   ‚îÇ  ‚îÇ          ‚îÇ  ‚îÇ          ‚îÇ  ‚îÇ          ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Flujo de Datos

1. **Autenticaci√≥n:**
   ```
   Usuario ‚Üí Login ‚Üí Backend (AuthController) ‚Üí JWT Token ‚Üí Frontend (localStorage) ‚Üí Axios Interceptor
   ```

2. **Operaciones CRUD:**
   ```
   UI ‚Üí Evento ‚Üí Service (Axios) ‚Üí Backend Controller ‚Üí Service Layer ‚Üí Repository ‚Üí Database
   ```

3. **Protecci√≥n de Rutas:**
   ```
   Navegaci√≥n ‚Üí PrivateRoute ‚Üí hasRole() ‚Üí Dashboard (seg√∫n rol)
   ```

---

## üõ† Tecnolog√≠as

### Backend

| Tecnolog√≠a | Versi√≥n | Prop√≥sito |
|-----------|---------|-----------|
| **Spring Boot** | 3.5.6 | Framework principal |
| **Java** | 21 | Lenguaje de programaci√≥n |
| **Spring Security** | 6.x | Autenticaci√≥n y autorizaci√≥n |
| **JWT** | 0.11.5 | Tokens de autenticaci√≥n |
| **Spring Data JPA** | 3.x | ORM y repositorios |
| **PostgreSQL** | 15+ | Base de datos relacional |
| **MapStruct** | 1.5.5 | Mapeo autom√°tico DTO ‚Üî Entity |
| **Lombok** | 1.18.40 | Reducci√≥n de boilerplate |
| **Jakarta Validation** | 3.x | Validaci√≥n de datos |
| **Maven** | 3.9+ | Gesti√≥n de dependencias |

### Frontend

| Tecnolog√≠a | Versi√≥n | Prop√≥sito |
|-----------|---------|-----------|
| **React** | 19.1.1 | Librer√≠a UI |
| **TypeScript** | 5.9.3 | Tipado est√°tico |
| **Vite** | 7.1.7 | Build tool |
| **React Router** | 6.30.1 | Routing |
| **Axios** | 1.12.2 | Cliente HTTP |
| **Tailwind CSS** | 4.1.14 | Framework CSS |
| **Context API** | - | Gesti√≥n de estado global |

---

## üì¶ Requisitos Previos

### Desarrollo Local

- **Java JDK** 21 o superior
- **Node.js** 20.x o superior
- **PostgreSQL** 15.x o superior
- **Maven** 3.9+ (o usar el wrapper incluido)
- **Git** para control de versiones

### Herramientas Recomendadas

- **IntelliJ IDEA** / **Eclipse** para backend
- **VS Code** para frontend
- **Postman** / **Insomnia** para testing de API
- **pgAdmin** / **DBeaver** para gesti√≥n de base de datos

---

## üöÄ Instalaci√≥n

### 1. Clonar el Repositorio

```bash
git clone https://github.com/santiago03m/Gestion-de-citas.git
cd Gestion-de-citas
```

### 2. Configurar Base de Datos

```bash
# Crear base de datos PostgreSQL
psql -U postgres
CREATE DATABASE citasdb;
CREATE USER citas_user WITH ENCRYPTED PASSWORD 'citas_pass_123';
GRANT ALL PRIVILEGES ON DATABASE citasdb TO citas_user;
\q
```

### 3. Configurar Backend

```bash
cd backend

# Crear archivo .env (opcional)
echo "JWT_SECRET=tu_secreto_jwt_super_seguro_de_minimo_256_bits" > .env

# Compilar y ejecutar
./mvnw clean install
./mvnw spring-boot:run
```

El backend estar√° disponible en `http://localhost:8080`

### 4. Configurar Frontend

```bash
cd frontend

# Instalar dependencias
npm install

# Ejecutar en modo desarrollo
npm run dev
```

El frontend estar√° disponible en `http://localhost:5173`

---

## ‚öôÔ∏è Configuraci√≥n

### Variables de Entorno (Backend)

Crear archivo `.env` en la carpeta `backend/`:

```env
# Base de Datos
DB_HOST=localhost
DB_PORT=5432
DB_NAME=citasdb
DB_USER=citas_user
DB_PASS=citas_pass_123

# JWT
JWT_SECRET=tu_secreto_jwt_super_seguro_de_minimo_256_bits_en_base64
```

### Variables de Entorno (Frontend)

Crear archivo `.env` en la carpeta `frontend/`:

```env
VITE_API_URL=http://localhost:8080/api
```

### Configuraci√≥n de Base de Datos (application.properties)

```properties
# Ubicaci√≥n: backend/src/main/resources/application.properties
spring.datasource.url=jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:citasdb}
spring.datasource.username=${DB_USER:citas_user}
spring.datasource.password=${DB_PASS:citas_pass_123}

spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true

security.jwt.secret-key=${JWT_SECRET}
security.jwt.expiration-time=3600000
```

---

## üìÅ Estructura del Proyecto

### Backend Structure

```
backend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ java/com/gestion/citas/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config/                      # Configuraciones
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ApplicationConfiguration.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SecurityConfig.java      # Spring Security + JWT
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ JwtAuthenticationFilter.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controller/                  # Controladores REST
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AuthController.java      # Login/Register
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserController.java      # Gesti√≥n usuarios
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PacienteController.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DoctorController.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CitaController.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ service/                     # L√≥gica de negocio
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ JwtService.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PacienteService.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DoctorService.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CitaService.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ impl/                    # Implementaciones
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ repository/                  # Repositorios JPA
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserRepository.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RoleRepository.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PacienteRepository.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DoctorRepository.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CitaRepository.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ model/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ entity/                  # Entidades JPA
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ User.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Role.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Paciente.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Doctor.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Cita.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ dto/                     # Data Transfer Objects
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ AuthenticationRequest.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ AuthenticationResponse.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ RegisterRequest.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ CurrentUserDto.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ UpdateUserDto.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ PacienteDto.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ DoctorDto.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ CitaDto.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mapper/                      # MapStruct Mappers
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PacienteMapper.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DoctorMapper.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CitaMapper.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ exceptions/                  # Manejo de errores
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GlobalExceptionHandler.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ResourceNotFoundException.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CitasApplication.java        # Clase principal
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ resources/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ application.properties       # Configuraci√≥n principal
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ application-docker.properties
‚îÇ   ‚îî‚îÄ‚îÄ test/                                # Tests
‚îú‚îÄ‚îÄ pom.xml                                  # Dependencias Maven
‚îî‚îÄ‚îÄ .env                                     # Variables de entorno
```

### Frontend Structure

```
frontend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main.tsx                             # Punto de entrada
‚îÇ   ‚îú‚îÄ‚îÄ App.tsx                              # Componente ra√≠z
‚îÇ   ‚îú‚îÄ‚îÄ pages/                               # P√°ginas principales
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Welcome.tsx                      # Landing page
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Dashboard.tsx                    # Dashboard principal
‚îÇ   ‚îú‚îÄ‚îÄ components/                          # Componentes reutilizables
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login.tsx                        # Formulario login
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Register.tsx                     # Formulario registro
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ dashboard/                       # Componentes del dashboard
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ ActionButtons.tsx            # Botones de acciones
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ DashboardNavbar.tsx          # Barra de navegaci√≥n
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ DashboardTabs.tsx            # Sistema de pesta√±as
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ DataTable.tsx                # Tabla gen√©rica de datos
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ Modal.tsx                    # Modal base
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ LoadingSpinner.tsx           # Indicador de carga
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ ErrorAlert.tsx               # Alertas de error
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ EmptyState.tsx               # Estado vac√≠o
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ EntityDetailsModal.tsx       # Modal de detalles
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ PacientesTab.tsx             # Pesta√±a pacientes
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ PacienteFormModal.tsx        # Formulario paciente
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ DoctoresTab.tsx              # Pesta√±a doctores
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ DoctorFormModal.tsx          # Formulario doctor
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ CitasTab.tsx                 # Pesta√±a citas
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ CitaFormModal.tsx            # Formulario cita
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ UsuariosTab.tsx              # Pesta√±a usuarios
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ UsuarioFormModal.tsx         # Formulario usuario
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ ConfirmDeleteModal.tsx       # Modal confirmaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ hooks/                               # Custom Hooks
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useAuth.ts                       # Hook de autenticaci√≥n
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useCurrentUser.ts                # Hook usuario actual
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ useDashboardData.ts              # Hook carga de datos
‚îÇ   ‚îú‚îÄ‚îÄ context/                             # Context API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AuthContext.ts                   # Contexto auth
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AuthProvider.tsx                 # Provider auth
‚îÇ   ‚îú‚îÄ‚îÄ services/                            # Servicios HTTP
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api.ts                           # Cliente Axios
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ authService.ts                   # Servicios auth
‚îÇ   ‚îú‚îÄ‚îÄ types/                               # TypeScript Types
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ dashboard.types.ts               # Tipos del dashboard
‚îÇ   ‚îú‚îÄ‚îÄ utils/                               # Utilidades
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ dashboardHelpers.ts              # Helpers dashboard
‚îÇ   ‚îú‚îÄ‚îÄ index.css                            # Estilos globales
‚îÇ   ‚îî‚îÄ‚îÄ App.css                              # Estilos App
‚îú‚îÄ‚îÄ public/                                  # Archivos est√°ticos
‚îú‚îÄ‚îÄ package.json                             # Dependencias npm
‚îú‚îÄ‚îÄ tsconfig.json                            # Configuraci√≥n TypeScript
‚îú‚îÄ‚îÄ vite.config.ts                           # Configuraci√≥n Vite
‚îî‚îÄ‚îÄ tailwind.config.js                       # Configuraci√≥n Tailwind
```

---

## üì° API Documentation

### Base URL
```
http://localhost:8080/api
```

### Autenticaci√≥n

#### POST `/auth/register` - Registro de usuario
```json
Request:
{
  "email": "usuario@ejemplo.com",
  "password": "password123",
  "fullName": "Nombre Completo"
}

Response: 200 OK
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "expiresIn": 3600000
}
```

#### POST `/auth/login` - Inicio de sesi√≥n
```json
Request:
{
  "email": "usuario@ejemplo.com",
  "password": "password123"
}

Response: 200 OK
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "expiresIn": 3600000
}
```

### Usuarios

#### GET `/users/me` - Usuario actual
```json
Response: 200 OK
{
  "id": 1,
  "fullName": "Nombre Completo",
  "email": "usuario@ejemplo.com",
  "roles": ["ADMIN"],
  "pacienteId": 5,
  "doctorId": null
}
```

#### GET `/users` - Listar usuarios (ADMIN)
```json
Response: 200 OK
[
  {
    "id": 1,
    "fullName": "Admin User",
    "email": "admin@ejemplo.com",
    "roles": [
      { "id": 1, "name": "ADMIN" }
    ]
  }
]
```

#### PUT `/users/{id}` - Actualizar usuario (ADMIN)
```json
Request:
{
  "fullName": "Nuevo Nombre",
  "email": "nuevo@ejemplo.com",
  "password": "nueva_password" // Opcional
}

Response: 200 OK
{
  "id": 1,
  "fullName": "Nuevo Nombre",
  "email": "nuevo@ejemplo.com"
}
```

#### DELETE `/users/{id}` - Eliminar usuario (ADMIN)
```
Response: 204 No Content
```

### Pacientes

#### GET `/pacientes` - Listar pacientes
```json
Response: 200 OK
[
  {
    "id": 1,
    "nombre": "Juan P√©rez",
    "documento": "12345678",
    "telefono": "3001234567",
    "correo": "juan@ejemplo.com"
  }
]
```

#### GET `/pacientes/{id}` - Obtener paciente
```json
Response: 200 OK
{
  "id": 1,
  "nombre": "Juan P√©rez",
  "documento": "12345678",
  "telefono": "3001234567",
  "correo": "juan@ejemplo.com"
}
```

#### POST `/pacientes` - Crear paciente
```json
Request:
{
  "nombre": "Juan P√©rez",
  "documento": "12345678",
  "telefono": "3001234567",
  "correo": "juan@ejemplo.com"
}

Response: 201 Created
{
  "id": 1,
  "nombre": "Juan P√©rez",
  "documento": "12345678",
  "telefono": "3001234567",
  "correo": "juan@ejemplo.com"
}
```

#### PUT `/pacientes/{id}` - Actualizar paciente
```json
Request:
{
  "nombre": "Juan P√©rez Actualizado",
  "documento": "12345678",
  "telefono": "3001234567",
  "correo": "juan@ejemplo.com"
}

Response: 200 OK
{
  "id": 1,
  "nombre": "Juan P√©rez Actualizado",
  ...
}
```

#### DELETE `/pacientes/{id}` - Eliminar paciente
```
Response: 204 No Content
```

### Doctores

#### GET `/doctores` - Listar doctores
```json
Response: 200 OK
[
  {
    "id": 1,
    "nombre": "Dra. Mar√≠a Garc√≠a",
    "especialidad": "Cardiolog√≠a",
    "telefono": "3009876543",
    "correo": "maria@ejemplo.com"
  }
]
```

#### POST `/doctores` - Crear doctor
```json
Request:
{
  "nombre": "Dr. Carlos L√≥pez",
  "especialidad": "Pediatr√≠a",
  "telefono": "3001112233",
  "correo": "carlos@ejemplo.com"
}

Response: 201 Created
```

#### PUT `/doctores/{id}` - Actualizar doctor
#### DELETE `/doctores/{id}` - Eliminar doctor

### Citas

#### GET `/citas` - Listar todas las citas (ADMIN)
```json
Response: 200 OK
[
  {
    "id": 1,
    "fecha": "2025-01-15",
    "hora": "10:30",
    "estado": "PENDIENTE",
    "paciente": {
      "id": 1,
      "nombre": "Juan P√©rez"
    },
    "doctor": {
      "id": 1,
      "nombre": "Dra. Mar√≠a Garc√≠a"
    }
  }
]
```

#### GET `/citas/doctor/{doctorId}` - Citas de un doctor
```json
Response: 200 OK
[...]
```

#### GET `/citas/paciente/{pacienteId}` - Citas de un paciente
```json
Response: 200 OK
[...]
```

#### POST `/citas` - Crear cita
```json
Request:
{
  "fecha": "2025-01-15",
  "hora": "10:30",
  "pacienteId": 1,
  "doctorId": 1,
  "estado": "PENDIENTE"
}

Response: 201 Created
{
  "id": 1,
  "fecha": "2025-01-15",
  "hora": "10:30",
  "estado": "PENDIENTE",
  "paciente": {
    "id": 1,
    "nombre": "Juan P√©rez"
  },
  "doctor": {
    "id": 1,
    "nombre": "Dra. Mar√≠a Garc√≠a"
  }
}
```

#### PUT `/citas/{id}` - Actualizar cita
```json
Request:
{
  "fecha": "2025-01-16",
  "hora": "11:00",
  "pacienteId": 1,
  "doctorId": 1,
  "estado": "CONFIRMADA"
}

Response: 200 OK
```

#### DELETE `/citas/{id}` - Eliminar cita
```
Response: 204 No Content
```

### C√≥digos de Estado HTTP

| C√≥digo | Significado |
|--------|-------------|
| 200 | OK - Solicitud exitosa |
| 201 | Created - Recurso creado |
| 204 | No Content - Eliminaci√≥n exitosa |
| 400 | Bad Request - Error de validaci√≥n |
| 401 | Unauthorized - Token inv√°lido/expirado |
| 403 | Forbidden - Sin permisos |
| 404 | Not Found - Recurso no encontrado |
| 500 | Internal Server Error - Error del servidor |

---

## üé® Componentes Frontend

### Componentes Principales

#### **Dashboard.tsx**
Componente orquestador principal del sistema. Gestiona:
- Sistema de pesta√±as din√°micas seg√∫n rol
- Estados de modales (crear, editar, eliminar, ver)
- Carga de datos con `useDashboardData`
- Handlers para todas las operaciones CRUD

```typescript
// Uso
<Dashboard />

// Features:
- Pesta√±as din√°micas: ADMIN (4 tabs), DOCTOR (2 tabs), PACIENTE (1 tab)
- Pre-selecci√≥n autom√°tica de doctor/paciente en formularios
- Recarga autom√°tica despu√©s de operaciones
- Validaci√≥n de permisos por rol
```

#### **Modal.tsx**
Modal base reutilizable con:
- Backdrop transl√∫cido con glassmorphism
- Animaciones fadeIn
- Cierre con ESC o click fuera
- Tama√±os configurables (sm, md, lg, xl)

```typescript
<Modal 
  isOpen={true}
  onClose={() => {}}
  title="T√≠tulo del Modal"
  size="md"
>
  {children}
</Modal>
```

#### **DataTable.tsx**
Tabla gen√©rica con TypeScript generics:
- Columnas configurables con renderizado custom
- Botones de acci√≥n (ver, editar, eliminar)
- Responsive design
- Hover effects

```typescript
<DataTable<Paciente>
  data={pacientes}
  columns={columns}
  onView={handleView}
  onEdit={handleEdit}
  onDelete={handleDelete}
  getRowKey={(item) => item.id}
/>
```

### Componentes de Formulario

#### **CitaFormModal.tsx**
Formulario inteligente de citas con:
- Pre-selecci√≥n de doctor para usuarios DOCTOR
- Pre-selecci√≥n de paciente para usuarios PACIENTE
- Campos deshabilitados contextuales
- Validaci√≥n de campos requeridos
- Mensajes informativos

```typescript
<CitaFormModal
  isOpen={true}
  onClose={() => {}}
  onSave={handleSave}
  cita={citaToEdit}
  mode="edit"
  pacientes={pacientes}
  doctores={doctores}
  currentDoctorId={15}  // Pre-selecci√≥n
  currentPacienteId={8} // Pre-selecci√≥n
/>
```

#### **PacienteFormModal.tsx**
Formulario de pacientes:
- Nombre (requerido)
- Documento
- Tel√©fono
- Correo electr√≥nico
- Modos: create/edit

#### **DoctorFormModal.tsx**
Formulario de doctores:
- Nombre (requerido)
- Especialidad
- Tel√©fono
- Correo electr√≥nico

#### **UsuarioFormModal.tsx**
Formulario de usuarios (solo ADMIN):
- Nombre completo
- Email
- Contrase√±a (opcional - vac√≠o mantiene actual)
- Toggle show/hide password
- Nota informativa sobre roles

### Componentes de Visualizaci√≥n

#### **EntityDetailsModal.tsx**
Modal de detalles sin IDs t√©cnicos:
- Cabecera visual con iconos SVG
- Iconos emoji para cada campo
- Descripciones amigables
- Formato de fecha en espa√±ol
- Badges con colores para estados

**Tipos soportados:**
- `paciente` - üîµ Azul
- `doctor` - üü¢ Verde
- `usuario` - üü£ P√∫rpura
- `cita` - üî∑ √çndigo

```typescript
<EntityDetailsModal
  type="cita"
  data={cita}
  isOpen={true}
  onClose={() => {}}
/>
```

### Custom Hooks

#### **useAuth**
Hook de autenticaci√≥n:
```typescript
const { auth, login, logout, hasRole } = useAuth();

// M√©todos:
- auth: { token, username, roles }
- login(email, password): Promise<void>
- logout(): void
- hasRole(role: string): boolean
```

#### **useCurrentUser**
Hook para obtener usuario actual:
```typescript
const { currentUserId, currentUser, loading, error } = useCurrentUser();

// Retorna:
- currentUserId: number | null
- currentUser: { id, fullName, email, roles, pacienteId?, doctorId? }
- loading: boolean
- error: string | null
```

#### **useDashboardData**
Hook para carga de datos del dashboard:
```typescript
const { pacientes, doctores, usuarios, citas, loading, error, reload } = useDashboardData({
  activeTab: 'citas',
  currentUserId: 1,
  hasRole: (role) => true
});

// Caracter√≠sticas:
- Carga datos seg√∫n pesta√±a activa
- Filtra citas por rol (ADMIN: todas, DOCTOR: sus citas, PACIENTE: sus citas)
- Funci√≥n reload() para recargar datos
```

### Utilidades

#### **dashboardHelpers.ts**
Funciones auxiliares:
```typescript
// Pesta√±as disponibles seg√∫n rol
getAvailableTabs(hasRole): TabType[]

// T√≠tulo del dashboard
getDashboardTitle(hasRole): string

// Descripci√≥n del dashboard
getDashboardDescription(hasRole): string
```

---

## üîí Seguridad

### Autenticaci√≥n JWT

#### Flujo de Autenticaci√≥n
1. Usuario env√≠a credenciales ‚Üí `POST /auth/login`
2. Backend valida ‚Üí Genera JWT token
3. Frontend guarda token ‚Üí `localStorage`
4. Requests incluyen token ‚Üí Header `Authorization: Bearer <token>`
5. Backend valida token ‚Üí Permite acceso

#### Configuraci√≥n JWT
```java
// JwtService.java
- Algoritmo: HS256
- Secreto: Variable de entorno JWT_SECRET (256+ bits)
- Expiraci√≥n: 1 hora (configurable)
- Claims: username, roles
```

### Spring Security

#### SecurityConfig.java
```java
// Rutas p√∫blicas
/api/auth/**  ‚Üí Sin autenticaci√≥n
/api/test/**  ‚Üí Sin autenticaci√≥n

// Rutas protegidas
/api/**  ‚Üí Requiere autenticaci√≥n JWT

// CORS
Permitido desde: http://localhost:5173 (frontend dev)
```

#### Roles y Permisos

| Endpoint | ADMIN | DOCTOR | PACIENTE |
|----------|-------|--------|----------|
| GET /pacientes | ‚úÖ | ‚úÖ | ‚ùå |
| POST /pacientes | ‚úÖ | ‚ùå | ‚ùå |
| GET /doctores | ‚úÖ | ‚úÖ | ‚ùå |
| POST /doctores | ‚úÖ | ‚ùå | ‚ùå |
| GET /usuarios | ‚úÖ | ‚ùå | ‚ùå |
| PUT /usuarios/{id} | ‚úÖ | ‚ùå | ‚ùå |
| GET /citas | ‚úÖ | ‚ùå | ‚ùå |
| GET /citas/doctor/{id} | ‚úÖ | ‚úÖ* | ‚ùå |
| GET /citas/paciente/{id} | ‚úÖ | ‚ùå | ‚úÖ* |
| POST /citas | ‚úÖ | ‚úÖ | ‚úÖ |
| PUT /citas/{id} | ‚úÖ | ‚úÖ* | ‚úÖ* |
| DELETE /citas/{id} | ‚úÖ | ‚úÖ* | ‚úÖ* |

*Solo sus propios recursos

### Protecci√≥n Frontend

#### PrivateRoute
```typescript
// Componente de ruta protegida
<PrivateRoute>
  <Dashboard />
</PrivateRoute>

// Redirige a /welcome si no est√° autenticado
```

#### Validaci√≥n de Roles
```typescript
// En componentes
{hasRole("ADMIN") && <button>Acci√≥n de Admin</button>}

// En formularios
onNew={hasRole("ADMIN") ? handleNewPaciente : undefined}
```

### Mejores Pr√°cticas Implementadas

‚úÖ **Contrase√±as Encriptadas** - BCryptPasswordEncoder
‚úÖ **Tokens con Expiraci√≥n** - 1 hora configurable
‚úÖ **CORS Restrictivo** - Solo or√≠genes permitidos
‚úÖ **Validaci√≥n de Input** - Bean Validation
‚úÖ **SQL Injection Prevention** - JPA/Hibernate
‚úÖ **XSS Protection** - Sanitizaci√≥n autom√°tica React
‚úÖ **CSRF Protection** - Stateless JWT (no cookies)

---

## üß™ Testing

### Backend Testing

```bash
# Ejecutar todos los tests
./mvnw test

# Ejecutar con cobertura
./mvnw test jacoco:report

# Ejecutar tests espec√≠ficos
./mvnw test -Dtest=CitaServiceTest
```

### Frontend Testing

```bash
# Ejecutar tests (si est√°n configurados)
npm run test

# Linting
npm run lint
```

### Testing Manual

#### Postman Collection
Importar colecci√≥n de Postman con todos los endpoints:
```
docs/postman/Gestion-Citas-API.postman_collection.json
```

#### Usuarios de Prueba
```
ADMIN:
- Email: admin@test.com
- Password: admin123

DOCTOR:
- Email: doctor@test.com
- Password: doctor123

PACIENTE:
- Email: paciente@test.com
- Password: paciente123
```

---

## üöÄ Deployment

### Docker Compose (Recomendado)

```bash
# Construir y levantar todos los servicios
docker-compose up --build -d

# Ver logs
docker-compose logs -f

# Detener servicios
docker-compose down
```

Servicios incluidos:
- `database` - PostgreSQL 15 (puerto 5432)
- `backend` - Spring Boot (puerto 8080)
- `frontend` - Nginx + React (puerto 80)

### Deployment en Producci√≥n

#### Backend (Spring Boot)

```bash
# Generar JAR
./mvnw clean package -DskipTests

# Ejecutar JAR
java -jar target/citas-0.0.1-SNAPSHOT.jar
```

#### Frontend (React + Vite)

```bash
# Build para producci√≥n
npm run build

# Archivos generados en: dist/
# Servir con nginx, Apache, o CDN
```

### Variables de Entorno de Producci√≥n

```env
# Backend
DB_HOST=production-db-host
DB_PORT=5432
DB_NAME=citasdb_prod
DB_USER=citas_prod_user
DB_PASS=<contrase√±a_segura>
JWT_SECRET=<secreto_256bits_base64>

# Frontend
VITE_API_URL=https://api.tusitio.com/api
```

---

## üìä Modelo de Base de Datos

### Diagrama ER

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      Users      ‚îÇ         ‚îÇ      Roles      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§         ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ id (PK)         ‚îÇ    M‚îÄN  ‚îÇ id (PK)         ‚îÇ
‚îÇ email           ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ name            ‚îÇ
‚îÇ password        ‚îÇ         ‚îÇ                 ‚îÇ
‚îÇ full_name       ‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ
        ‚îÇ 1:1
        ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Pacientes     ‚îÇ         ‚îÇ    Doctores     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§         ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ id (PK)         ‚îÇ         ‚îÇ id (PK)         ‚îÇ
‚îÇ nombre          ‚îÇ         ‚îÇ nombre          ‚îÇ
‚îÇ documento       ‚îÇ         ‚îÇ especialidad    ‚îÇ
‚îÇ telefono        ‚îÇ         ‚îÇ telefono        ‚îÇ
‚îÇ correo          ‚îÇ         ‚îÇ correo          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ                           ‚îÇ
        ‚îÇ 1                     1   ‚îÇ
        ‚îÇ                           ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚îÇ
                   ‚îÇ M
                   ‚ñº
            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
            ‚îÇ      Citas      ‚îÇ
            ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
            ‚îÇ id (PK)         ‚îÇ
            ‚îÇ fecha           ‚îÇ
            ‚îÇ hora            ‚îÇ
            ‚îÇ motivo          ‚îÇ
            ‚îÇ estado          ‚îÇ
            ‚îÇ paciente_id(FK) ‚îÇ
            ‚îÇ doctor_id (FK)  ‚îÇ
            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Tablas

#### `users`
```sql
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    email VARCHAR(255) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    full_name VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### `roles`
```sql
CREATE TABLE roles (
    id SERIAL PRIMARY KEY,
    name VARCHAR(50) UNIQUE NOT NULL
);

-- Roles predefinidos
INSERT INTO roles (name) VALUES ('ADMIN'), ('DOCTOR'), ('PACIENTE');
```

#### `user_roles`
```sql
CREATE TABLE user_roles (
    user_id INTEGER REFERENCES users(id),
    role_id INTEGER REFERENCES roles(id),
    PRIMARY KEY (user_id, role_id)
);
```

#### `pacientes`
```sql
CREATE TABLE pacientes (
    id SERIAL PRIMARY KEY,
    nombre VARCHAR(255) NOT NULL,
    documento VARCHAR(50),
    telefono VARCHAR(20),
    correo VARCHAR(255),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### `doctores`
```sql
CREATE TABLE doctores (
    id SERIAL PRIMARY KEY,
    nombre VARCHAR(255) NOT NULL,
    especialidad VARCHAR(100),
    telefono VARCHAR(20),
    correo VARCHAR(255),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### `citas`
```sql
CREATE TABLE citas (
    id SERIAL PRIMARY KEY,
    fecha DATE NOT NULL,
    hora TIME NOT NULL,
    motivo TEXT,
    estado VARCHAR(50) DEFAULT 'PENDIENTE',
    paciente_id INTEGER REFERENCES pacientes(id),
    doctor_id INTEGER REFERENCES doctores(id),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

---

## ü§ù Contribuci√≥n

### Workflow de Contribuci√≥n

1. **Fork** el repositorio
2. **Crear rama** feature: `git checkout -b feature/nueva-funcionalidad`
3. **Commit** cambios: `git commit -m 'feat: Agregar nueva funcionalidad'`
4. **Push** a la rama: `git push origin feature/nueva-funcionalidad`
5. **Abrir Pull Request**

### Convenci√≥n de Commits

Seguimos [Conventional Commits](https://www.conventionalcommits.org/):

```
feat: Nueva caracter√≠stica
fix: Correcci√≥n de bug
docs: Documentaci√≥n
style: Formato, sin cambios de c√≥digo
refactor: Refactorizaci√≥n de c√≥digo
test: Agregar/modificar tests
chore: Mantenimiento, dependencias
```

### Est√°ndares de C√≥digo

#### Backend (Java)
- Seguir convenciones de Java (Google Style Guide)
- Usar Lombok para reducir boilerplate
- Documentar m√©todos p√∫blicos con Javadoc
- Tests unitarios para servicios

#### Frontend (TypeScript)
- Usar TypeScript estricto
- Componentes funcionales con hooks
- Props bien tipadas
- ESLint configurado

---

## üìù Roadmap

### Versi√≥n 1.0 (Actual)
- [x] Sistema de autenticaci√≥n JWT
- [x] CRUD completo de pacientes, doctores y citas
- [x] Dashboard con roles diferenciados
- [x] Pre-selecci√≥n inteligente de formularios
- [x] Gesti√≥n de usuarios por admin

### Versi√≥n 1.1 (Pr√≥ximo)
- [ ] Notificaciones por email
- [ ] Recordatorios de citas
- [ ] Historial de citas
- [ ] Calendario visual
- [ ] Exportaci√≥n a PDF

### Versi√≥n 2.0 (Futuro)
- [ ] App m√≥vil (React Native)
- [ ] Videollamadas integradas
- [ ] Pagos en l√≠nea
- [ ] An√°lisis y reportes
- [ ] Multi-tenancy

---

## üìÑ Licencia

Este proyecto est√° bajo la Licencia MIT. Ver archivo `LICENSE` para m√°s detalles.

```
MIT License

Copyright (c) 2025 Santiago

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction...
```

---

## üë• Autores

- **Santiago** - Desarrollo Full Stack - [@santiago03m](https://github.com/santiago03m)

---

## üôè Agradecimientos

- Spring Boot Team
- React Team
- MapStruct
- Tailwind CSS
- Comunidad Open Source

---

## üìû Contacto

- **GitHub:** [@santiago03m](https://github.com/santiago03m)
- **Email:** santiruedadhhd@gmail.com

---

## üìö Recursos Adicionales

### Documentaci√≥n Oficial
- [Spring Boot Docs](https://docs.spring.io/spring-boot/docs/current/reference/html/)
- [React Docs](https://react.dev/)
- [TypeScript Handbook](https://www.typescriptlang.org/docs/)
- [Tailwind CSS](https://tailwindcss.com/docs)

### Tutoriales Relacionados
- JWT Authentication with Spring Boot
- React + TypeScript Best Practices
- PostgreSQL Performance Tuning

---

<div align="center">

**‚≠ê Si este proyecto te fue √∫til, considera darle una estrella en GitHub ‚≠ê**

Made with ‚ù§Ô∏è by Santiago

</div>
